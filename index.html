<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Кликер</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding-top: 50px;
      background-color: #222;
      color: #eee;
      margin: 0;
    }

    button {
      transition: transform 0.1s ease;
      cursor: pointer;
      border: none;
      border-radius: 6px;
      background-color: #3498db;
      color: white;
      padding: 10px 18px;
      font-size: 16px;
      user-select: none;
    }

    button.clicked {
      transform: scale(1.2);
    }

    #clickButton {
      font-size: 28px;
      padding: 25px 50px;
      margin: 20px;
      background-color: #27ae60;
    }

    #upgradeButton {
      font-size: 18px;
      margin: 15px 0 0 0;
      background-color: #2980b9;
      width: 260px;
    }

    .info {
      font-size: 22px;
      margin: 10px;
    }

    .menu {
      position: absolute;
      top: 20px;
      right: 20px;
      display: flex;
      gap: 12px;
      z-index: 10;
    }

    .menu button {
      padding: 10px 16px;
      font-size: 15px;
      background-color: #34495e;
      color: #ddd;
      transition: transform 0.3s ease, opacity 0.3s ease;
      width: 100px;
    }

    .menu:hover button:not(:hover) {
      transform: scale(0.9);
      opacity: 0.6;
    }

    .menu button:hover {
      transform: scale(1.2);
      z-index: 1;
      background-color: #1abc9c;
      color: #fff;
    }

    .frame {
      margin-top: 20px;
      background: #333;
      border-radius: 10px;
      padding: 20px;
      width: 350px;
      margin-left: auto;
      margin-right: auto;
      min-height: 120px;
      color: #ccc;
      display: none;
      user-select: none;
    }

    .frame.active {
      display: block;
    }

  </style>
</head>
<body>
  <h1>Кликер</h1>

  <div class="menu">
    <button id="btnEggs">Яйца</button>
    <button id="btnInventory">Инвентарь</button>
    <button id="btnSettings">Настройки</button>
  </div>

  <div class="info">Очки: <span id="score">0</span></div>
  <button id="clickButton">Кликни!</button>
  <div class="info">Сила клика: <span id="clickPower">1</span></div>
  <div class="info">Кулдаун клика: <span id="clickCooldownDisplay">1.5</span> сек</div>
  <button id="upgradeButton">Уменьшить КД (1.5 → 1.4) — 1,000</button>

  <div id="frameEggs" class="frame">Здесь будет информация про Яйца.</div>
  <div id="frameInventory" class="frame">Здесь будет Инвентарь.</div>
  <div id="frameSettings" class="frame">Настройки игры появятся здесь.</div>

<script>
  let score = 0
  let clickPower = 1

  const baseCooldown = 1.5
  const minCooldown = 0.6

  let clickCooldown = baseCooldown
  let lastClickTime = 0

  let cdLevels = []
  let cdUpgradeLevel = 0
  let currentUpgradePrice = 1000

  function formatNumber(num) {
    return num.toLocaleString('en-US')
  }

  function generateCdLevels() {
    let price = 1000
    let cd = baseCooldown
    cdLevels = []
    while (cd > minCooldown + 0.001) {
      const nextCd = +(cd - 0.1).toFixed(1)
      cdLevels.push({from: cd, to: nextCd, price})
      price *= 10
      cd = nextCd
    }
  }

  generateCdLevels()

  const scoreEl = document.getElementById('score')
  const clickPowerEl = document.getElementById('clickPower')
  const clickButton = document.getElementById('clickButton')
  const upgradeButton = document.getElementById('upgradeButton')
  const clickCooldownDisplay = document.getElementById('clickCooldownDisplay')

  const btnEggs = document.getElementById('btnEggs')
  const btnInventory = document.getElementById('btnInventory')
  const btnSettings = document.getElementById('btnSettings')

  const frameEggs = document.getElementById('frameEggs')
  const frameInventory = document.getElementById('frameInventory')
  const frameSettings = document.getElementById('frameSettings')

  function toggleFrame(button, frame) {
    if (button.textContent === 'обратно') {
      hideAllFrames()
      resetMenuButtons()
      button.textContent = button.dataset.origText
    } else {
      hideAllFrames()
      resetMenuButtons()
      frame.classList.add('active')
      button.textContent = 'обратно'
    }
  }

  function hideAllFrames() {
    frameEggs.classList.remove('active')
    frameInventory.classList.remove('active')
    frameSettings.classList.remove('active')
  }

  function resetMenuButtons() {
    ;[btnEggs, btnInventory, btnSettings].forEach(btn => {
      if (btn.textContent === 'обратно') {
        btn.textContent = btn.dataset.origText
      }
    })
  }

  btnEggs.dataset.origText = 'Яйца'
  btnInventory.dataset.origText = 'Инвентарь'
  btnSettings.dataset.origText = 'Настройки'

  btnEggs.addEventListener('click', () => toggleFrame(btnEggs, frameEggs))
  btnInventory.addEventListener('click', () => toggleFrame(btnInventory, frameInventory))
  btnSettings.addEventListener('click', () => toggleFrame(btnSettings, frameSettings))

  function animateButton(button) {
    button.classList.add('clicked')
    setTimeout(() => {
      button.classList.remove('clicked')
    }, 100)
  }

  function updateUI() {
    scoreEl.textContent = formatNumber(score)
    clickPowerEl.textContent = formatNumber(clickPower)
    clickCooldownDisplay.textContent = clickCooldown.toFixed(1)
    updateCdUpgradeButton()
  }

  function saveData() {
    const data = {
      score,
      clickPower,
      clickCooldown,
      cdUpgradeLevel,
      currentUpgradePrice,
    }
    localStorage.setItem('clickerSave', JSON.stringify(data))
  }

  function loadData() {
    const data = localStorage.getItem('clickerSave')
    if (data) {
      const parsed = JSON.parse(data)
      score = parsed.score || 0
      clickPower = parsed.clickPower || 1
      clickCooldown = parsed.clickCooldown || baseCooldown
      cdUpgradeLevel = parsed.cdUpgradeLevel || 0
      currentUpgradePrice = parsed.currentUpgradePrice || 1000
    }
  }

  clickButton.addEventListener('click', () => {
    const now = Date.now()
    if (now - lastClickTime < clickCooldown * 1000) {
      return
    }
    lastClickTime = now

    score += clickPower
    updateUI()
    animateButton(clickButton)
    saveData()
  })

  upgradeButton.addEventListener('click', () => {
    if (cdUpgradeLevel >= cdLevels.length) {
      alert('Максимальный уровень КД достигнут')
      return
    }
    if (score < currentUpgradePrice) {
      alert('Недостаточно очков для улучшения КД!')
      return
    }
    score -= currentUpgradePrice
    clickCooldown = cdLevels[cdUpgradeLevel].to
    cdUpgradeLevel++
    currentUpgradePrice *= 3
    updateUI()
    saveData()
    animateButton(upgradeButton)
  })

  function updateCdUpgradeButton() {
    if (cdUpgradeLevel >= cdLevels.length) {
      upgradeButton.textContent = 'Максимальный уровень КД достигнут'
      upgradeButton.disabled = true
      return
    }
    const lvl = cdUpgradeLevel
    upgradeButton.textContent = `Уменьшить КД (${cdLevels[lvl].from} → ${cdLevels[lvl].to}) — ${formatNumber(currentUpgradePrice)}`
    upgradeButton.disabled = score < currentUpgradePrice
  }

  loadData()
  updateUI()
</script>
</body>
</html>
